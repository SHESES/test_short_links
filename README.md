## Общее

Данный проект создан в качестве тестового задания. Frontend создан с использованием:

- HTML, CSS, JS;
- JQuery;
- Vue.js;
- Bootstrap. Backend создан с помощью Python, библиотека Flask.

> **Примечание:** В качестве примера (ориентира) работы предложен сервис https://bitly.com/.

## Начальная страница

Под начальной страницей подразумевается страница создания короткой ссылки. Интерфейс содержит:

- Логотип компании;
- Поле для полной ссылки;
- Кнопку "Сгенерировать ссылку";
- Поле для короткой ссылки, на котором есть кнопка копирования ссылки;
- Скриншот страницы, для которой создана короткая ссылка.

При нажатии на кнопку генерации происходит запрос на адрес вида [http://127.0.0.1:5000/new_link/](http://127.0.0.1:5000/new_link/), где происходит запрос в базу данных, приходит сгенерированная короткая ссылка (об этом ниже), после чего происходит запрос скриншота страницы на адрес типа [http://127.0.0.1:5000/screen/](http://127.0.0.1:5000/screen/). После чего на страницу вставляется изображение. При ожидании скриншота пользователь видит изображение для загрузки.

К ней относятся файлы:

* templates/index.html;
* static/js/script.js;
* static/css/style.css;
* static/img/cat.gif;
* static/img/cat2.gif.

## API

Далее можно увидеть таблицу адресов обращения и методов для них, принимаемых значений.

<table>
<tr>
<th>Адрес</th>
<th>Методы</th>
<th>Функция</th>
<th>Параметры</th>
<th>Ответ</th>
</tr>
<tr>
<td>/ping</td>
<td>GET</td>
<td>Проверка работы сервера</td>
<td>

\-
</td>
<td>{"message": "ok"}</td>
</tr>
<tr>
<td>/new_link/</td>
<td>GET, POST</td>
<td>Создание новой короткой ссылки</td>
<td>long_link - длинная ссылка</td>
<td>

{"link": "ссылка"} - успешное создание, короткая ссылка

{"error": "database"} - ошибка базы данных

{"error": "data"} - ошибка приёма данных (параметры не указаны)
</td>
</tr>
<tr>
<td>/screen/</td>
<td>GET, POST</td>
<td>Скриншот страницы</td>
<td>long_link - ссылка на страницу</td>
<td>Отдаёт файл со скриншотом</td>
</tr>
<tr>
<td>

/link/\<string:hash_link\>
</td>
<td>GET</td>
<td>Производит редирект с короткой ссылки на длинную или выдаёт ошибку</td>
<td>hash_link - короткая ссылка</td>
<td>

Шаблон error_404.html - ссылка не найдена

Шаблон error_db.html - ошибка базы данных

Редирект - успешное нахождение длинной ссылки
</td>
</tr>
</table>


## **Используемые ресурсы**

В папке **resourse** - модули, которые используются в проекте. 

**db\_module.py** - доступ к базе данных, определённые запросы, обработка полученных данных с использованием объектно-ориентированного подхода. 

**hash\_code.py** - функция генерации хеш-кода для коротких ссылок заданной длинны. 

## Отдаваемые файлы

Шаблоны находятся в папке templates. 

error.html - шаблон страницы ошибки с использованием Bootstrap. 

error_404.html - использует шаблон error. Ошибка поиска полной ссылки. 

error_db.html - использует шаблон error. Ошибка доступа к базе данных. 

static/css/err.css - файл стилей для шаблона error. 

# База данных

Используется база данных PostgreSQL. 

Доступ к базе данных происходит через встроенные функции и процедуры. Их параметры указаны в таблице ниже. 

| Имя | Параметры | Отдаваемое значение | Описание |
|-----|-----------|---------------------|----------|
| new_link | IN long text, IN short character varying | \- | Создаёт новую пару полная ссылка  - хеш-код |
| get_long_url | short_url character varying | character varying | Отдаёт полную ссылку в ответ на хеш-код. |

